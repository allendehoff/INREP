{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/allen/GitHub/casrep/client/src/pages/CurrentPatient.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\"; // import { Component } from \"react\"\n\nimport { Row, Col } from \"react-bootstrap\";\nimport Card from \"react-bootstrap/Card\"; // import Moment from 'react-moment';\n// import 'moment-timezone';\n// import React from 'react';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport EtaUpdateButton from \"../components/EtaUpdate/EtaUpdateButton\";\nimport EtaUpdate from \"../components/EtaUpdate/EtaUpdate\";\nimport PatientCard from \"../components/PatientCard/PatientCard\";\nimport VitalsForm from \"../components/Vitals/VitalsForm\";\nimport NewVitals from \"../components/Vitals/NewVitals\";\nimport CriticalWarnings from \"../components/CriticalWarning/CriticalWarnings\";\nimport CriticalWarnSelect from \"../components/CriticalWarning/CritWarnSelect\";\nimport UpdateInformation from \"../components/PatientInformation/UpdateInformation\";\nimport PatientInformationForm from \"../components/PatientInformation/PatientInformationForm\";\nimport EMSToolbar from \"../components/EMSToolbar/EMSToolbar\";\nimport { useParams } from \"react-router-dom\";\nimport API from \"../utils/API\";\nimport io from \"socket.io-client\";\nconst socket = io();\n\nconst dayjs = require(\"dayjs\");\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  header: {\n    padding: \"2rem 0 4rem 0\",\n    textAlign: \"center\",\n    borderBottom: \"5px solid #FFD400\",\n    marginBottom: \"3rem\"\n  },\n  subheader: {\n    textAlign: \"center\",\n    paddingBottom: \"3rem\"\n  }\n}));\n\nfunction CurrentPatient() {\n  _s();\n\n  const classes = useStyles(); // const [entries, setEntries] = useState(1)\n\n  const [ptInfo, setPtInfo] = useState({});\n  const blankVitals = {\n    time: \"\",\n    HR: \"Not Reported\",\n    RR: \"Not Reported\",\n    BPs: \"Not Reported\",\n    BPd: \"Not Reported\",\n    oxygen: \"Not Reported\"\n  };\n  const [vitals, setVitals] = useState(blankVitals);\n  const criticalsAllFalse = {\n    pending: false,\n    CPR: false,\n    stroke: false,\n    trauma1: false,\n    trauma2: false,\n    intubated: false,\n    fallWithThinners: false\n  };\n  const [criticalWarnings, setCriticalWarning] = useState(criticalsAllFalse);\n  const [eta, setEta] = useState({\n    pending: false,\n    time: \"\"\n  });\n  const [patientInformation, setPatientInformation] = useState({\n    pending: false,\n    age: \"Not Reported\",\n    sex: \"Not Reported\",\n    chiefComplaint: \"Not Reported\",\n    moiHpi: \"Not Reported\",\n    oxygenTx: \"Not Reported\",\n    from: \"Not Reported\"\n  });\n  const {\n    id\n  } = useParams(); // let idOnly = ({ id }.id).slice(3)\n\n  useEffect(() => {\n    // console.log(id)\n    loadById(id); // console.log(ptInfo)\n  }, []);\n\n  function loadById(id) {\n    // console.log(id)\n    API.findById(id).then(ptData => {\n      setPtInfo(ptData);\n    });\n  }\n\n  function handleVitalsInput(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    setVitals({ ...vitals,\n      [name]: value\n    });\n  }\n\n  ;\n\n  function initVitals() {\n    // console.log(ptInfo)\n    setVitals({ ...vitals,\n      time: dayjs().format(\"HH:mm:ss\")\n    });\n  }\n\n  function handleVitalsSubmit(event, data) {\n    event.preventDefault();\n    console.log(data);\n\n    if (data.HR !== \"Not Reported\") {\n      API.updateVitals(id, data).then(socket.emit(\"update\")) // .then(setVitals(blankVitals))\n      .then(loadById(id));\n    } // .exec(loadById(id))\n    // console.log(vitals)\n    // console.log(\"here\")\n\n  }\n\n  function initCriticals() {\n    setCriticalWarning({ ...criticalWarnings,\n      pending: true\n    });\n  }\n\n  function handleCriticalsInput(event) {\n    // console.log(event.target.checked)\n    const {\n      name,\n      checked\n    } = event.target;\n    setCriticalWarning({ ...criticalWarnings,\n      [name]: checked\n    });\n  }\n\n  function handleCriticalsSubmit(event, data) {\n    event.preventDefault(); // console.log(data)\n    // setCriticalWarning({ ...criticalWarnings, pending: false })\n    // // console.log(criticalWarnings)\n    // // const warningsString = JSON.stringify(criticalWarnings)\n    // // console.log(warningsString)\n\n    API.updateCriticalWarnings(id, data) // .then(setCriticalWarning(data))\n    // .then(setCriticalWarning({...criticalWarnings}))\n    .then(socket.emit(\"update\")) // .then(event.target.parentElement.parentElement.reset())\n    .then(loadById(id));\n  }\n\n  function initEtaUpdate() {\n    setEta({ ...eta,\n      pending: true\n    });\n  }\n\n  function handleEtaInput(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    setEta({ ...eta,\n      [name]: value\n    }); // console.log(eta.time)\n  }\n\n  function handleEtaSubmit(event) {\n    event.preventDefault(); // console.log(event.target.parentElement.parentElement)\n\n    API.updateETA(id, {\n      time: eta.time\n    }).then(socket.emit(\"update\")).then(event.target.parentElement.parentElement.reset()) // .then(setEta({ pending: false }))\n    .then(loadById(id));\n  }\n\n  function initPatientInformation() {\n    setPatientInformation({ ...patientInformation,\n      pending: true\n    });\n  }\n\n  function handlePtInformationChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    setPatientInformation({ ...patientInformation,\n      [name]: value\n    });\n  }\n\n  function handlePtInformationSubmit(event, data) {\n    event.preventDefault();\n    API.updatePtInformation(id, data).then(socket.emit(\"update\")) // .then(setPatientInformation({ pending: false }))\n    .then(loadById(id));\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    style: {\n      paddingTop: \"2rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        className: classes.header,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h2\",\n          style: {\n            color: \"#FFD400\"\n          },\n          children: \"Welcome EMS User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          style: {\n            color: \"#B7D5D4\"\n          },\n          children: \"Enter updates below to keep the hospital informed about your patient\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      children: /*#__PURE__*/_jsxDEV(EMSToolbar, {\n        etaInputChange: handleEtaInput,\n        etaSubmit: handleEtaSubmit,\n        criticalSubmit: handleCriticalsSubmit,\n        vitalSubmit: handleVitalsSubmit,\n        ptInfoSubmit: handlePtInformationSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        children: ptInfo.data ? /*#__PURE__*/_jsxDEV(PatientCard, {\n          patient: ptInfo.data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 26\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CurrentPatient, \"wKvjW7XhUaLsSJWEjop0jG8Rz9M=\", false, function () {\n  return [useStyles, useParams];\n});\n\n_c = CurrentPatient;\nexport default CurrentPatient;\n\nvar _c;\n\n$RefreshReg$(_c, \"CurrentPatient\");","map":{"version":3,"sources":["/Users/allen/GitHub/casrep/client/src/pages/CurrentPatient.js"],"names":["React","useState","useEffect","Row","Col","Card","CssBaseline","Typography","Container","Grid","makeStyles","EtaUpdateButton","EtaUpdate","PatientCard","VitalsForm","NewVitals","CriticalWarnings","CriticalWarnSelect","UpdateInformation","PatientInformationForm","EMSToolbar","useParams","API","io","socket","dayjs","require","useStyles","theme","root","flexGrow","header","padding","textAlign","borderBottom","marginBottom","subheader","paddingBottom","CurrentPatient","classes","ptInfo","setPtInfo","blankVitals","time","HR","RR","BPs","BPd","oxygen","vitals","setVitals","criticalsAllFalse","pending","CPR","stroke","trauma1","trauma2","intubated","fallWithThinners","criticalWarnings","setCriticalWarning","eta","setEta","patientInformation","setPatientInformation","age","sex","chiefComplaint","moiHpi","oxygenTx","from","id","loadById","findById","then","ptData","handleVitalsInput","event","name","value","target","initVitals","format","handleVitalsSubmit","data","preventDefault","console","log","updateVitals","emit","initCriticals","handleCriticalsInput","checked","handleCriticalsSubmit","updateCriticalWarnings","initEtaUpdate","handleEtaInput","handleEtaSubmit","updateETA","parentElement","reset","initPatientInformation","handlePtInformationChange","handlePtInformationSubmit","updatePtInformation","paddingTop","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\n// import { Component } from \"react\"\nimport {  Row, Col } from \"react-bootstrap\"\nimport Card from \"react-bootstrap/Card\"\n// import Moment from 'react-moment';\n// import 'moment-timezone';\n\n// import React from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport EtaUpdateButton from \"../components/EtaUpdate/EtaUpdateButton\"\nimport EtaUpdate from \"../components/EtaUpdate/EtaUpdate\"\nimport PatientCard from \"../components/PatientCard/PatientCard\"\nimport VitalsForm from \"../components/Vitals/VitalsForm\"\nimport NewVitals from \"../components/Vitals/NewVitals\"\nimport CriticalWarnings from \"../components/CriticalWarning/CriticalWarnings\"\nimport CriticalWarnSelect from \"../components/CriticalWarning/CritWarnSelect\"\nimport UpdateInformation from \"../components/PatientInformation/UpdateInformation\"\nimport PatientInformationForm from \"../components/PatientInformation/PatientInformationForm\"\nimport EMSToolbar from \"../components/EMSToolbar/EMSToolbar\"\n\nimport { useParams } from \"react-router-dom\"\nimport API from \"../utils/API\"\n\n\nimport io from \"socket.io-client\"\nconst socket = io()\n\nconst dayjs = require(\"dayjs\")\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1\n    },\n    header: {\n        padding: \"2rem 0 4rem 0\",\n        textAlign: \"center\",\n        borderBottom: \"5px solid #FFD400\",\n        marginBottom: \"3rem\"\n    },\n    subheader: {\n        textAlign: \"center\",\n        paddingBottom: \"3rem\"\n    }\n}))\n\nfunction CurrentPatient() {\n    const classes = useStyles()\n    // const [entries, setEntries] = useState(1)\n\n    const [ptInfo, setPtInfo] = useState({})\n\n    const blankVitals = {\n        time: \"\",\n        HR: \"Not Reported\",\n        RR: \"Not Reported\",\n        BPs: \"Not Reported\",\n        BPd: \"Not Reported\",\n        oxygen: \"Not Reported\",\n    }\n    const [vitals, setVitals] = useState(blankVitals)\n\n\n    const criticalsAllFalse = {\n        pending: false,\n        CPR: false,\n        stroke: false,\n        trauma1: false,\n        trauma2: false,\n        intubated: false,\n        fallWithThinners: false\n    }\n    const [criticalWarnings, setCriticalWarning] = useState(criticalsAllFalse)\n\n    const [eta, setEta] = useState({\n        pending: false,\n        time: \"\"\n    })\n\n    const [patientInformation, setPatientInformation] = useState({\n        pending: false,\n        age: \"Not Reported\",\n        sex: \"Not Reported\",\n        chiefComplaint: \"Not Reported\",\n        moiHpi: \"Not Reported\",\n        oxygenTx: \"Not Reported\",\n        from: \"Not Reported\"\n    })\n\n    const { id } = useParams()\n    // let idOnly = ({ id }.id).slice(3)\n\n    useEffect(() => {\n\n        // console.log(id)\n        loadById(id)\n        // console.log(ptInfo)\n    }, [])\n\n    function loadById(id) {\n        // console.log(id)\n        API.findById(id)\n            .then((ptData) => {\n                setPtInfo(ptData)\n            })\n    }\n\n    function handleVitalsInput(event) {\n        const { name, value } = event.target;\n        setVitals({ ...vitals, [name]: value })\n    };\n\n    function initVitals() {\n        // console.log(ptInfo)\n        setVitals({ ...vitals, time: dayjs().format(\"HH:mm:ss\") })\n    }\n\n    function handleVitalsSubmit(event, data) {\n        event.preventDefault();\n        console.log(data)\n        if (data.HR !== \"Not Reported\") {\n            API.updateVitals(id, data)\n                .then(socket.emit(\"update\"))\n                // .then(setVitals(blankVitals))\n                .then(loadById(id))\n        }\n        // .exec(loadById(id))\n        // console.log(vitals)\n        // console.log(\"here\")\n    }\n\n    function initCriticals() {\n        setCriticalWarning({ ...criticalWarnings, pending: true })\n    }\n\n    function handleCriticalsInput(event) {\n        // console.log(event.target.checked)\n        const { name, checked } = event.target\n        setCriticalWarning({ ...criticalWarnings, [name]: checked })\n    }\n\n    function handleCriticalsSubmit(event, data) {\n        event.preventDefault();\n        // console.log(data)\n        // setCriticalWarning({ ...criticalWarnings, pending: false })\n        // // console.log(criticalWarnings)\n        // // const warningsString = JSON.stringify(criticalWarnings)\n        // // console.log(warningsString)\n        API.updateCriticalWarnings(id, data)\n            // .then(setCriticalWarning(data))\n            // .then(setCriticalWarning({...criticalWarnings}))\n            .then(socket.emit(\"update\"))\n            // .then(event.target.parentElement.parentElement.reset())\n            .then(loadById(id))\n    }\n\n    function initEtaUpdate() {\n        setEta({ ...eta, pending: true })\n    }\n\n    function handleEtaInput(event) {\n        const { name, value } = event.target\n        setEta({ ...eta, [name]: value })\n        // console.log(eta.time)\n    }\n\n    function handleEtaSubmit(event) {\n        event.preventDefault()\n        // console.log(event.target.parentElement.parentElement)\n        API.updateETA(id, { time: eta.time })\n            .then(socket.emit(\"update\"))\n            .then(event.target.parentElement.parentElement.reset())\n            // .then(setEta({ pending: false }))\n            .then(loadById(id))\n    }\n\n    function initPatientInformation() {\n        setPatientInformation({ ...patientInformation, pending: true })\n    }\n\n    function handlePtInformationChange(event) {\n        const { name, value } = event.target\n        setPatientInformation({ ...patientInformation, [name]: value })\n    }\n\n    function handlePtInformationSubmit(event, data) {\n        event.preventDefault()\n        API.updatePtInformation(id, data)\n            .then(socket.emit(\"update\"))\n            // .then(setPatientInformation({ pending: false }))\n            .then(loadById(id))\n    }\n\n    return (\n        <Container style={{ paddingTop: \"2rem\" }}>\n            <Grid container>\n                <Grid item xs={12} className={classes.header}>\n                    <Typography variant=\"h2\" style={{ color: \"#FFD400\" }}>Welcome EMS User</Typography>\n                    <Typography variant=\"h4\" style={{ color: \"#B7D5D4\" }}>Enter updates below to keep the hospital informed about your patient</Typography>\n                </Grid>\n            </Grid>\n            <Grid container>\n                <EMSToolbar \n                    etaInputChange={handleEtaInput}\n                    etaSubmit={handleEtaSubmit}\n                    criticalSubmit={handleCriticalsSubmit}\n                    vitalSubmit={handleVitalsSubmit}\n                    ptInfoSubmit ={handlePtInformationSubmit}\n                />\n            </Grid>\n\n            {/* <Row>\n                <Col>\n                    <Card >\n                        <Card.Header>ETA:\n                                 {/* <span>{ptInfo.data.ETA ? (ptInfo.data.ETA):(\"pending\")}</span> \n                        </Card.Header>\n                        <Card.Body>\n                            {eta.pending ? (\n                                <EtaUpdate\n                                    onChange={handleEtaInput}\n                                    onSubmit={handleEtaSubmit}\n                                ></EtaUpdate>\n                            ) : (\n                                    <EtaUpdateButton onClick={initEtaUpdate} />\n                                )}\n                        </Card.Body>\n                    </Card>\n                </Col>\n                <Col>\n                    {criticalWarnings.pending ? (\n                        <CriticalWarnSelect\n                            // style={{ width: \"80%\" }}\n                            onChange={handleCriticalsInput}\n                            onSubmit={handleCriticalsSubmit}\n                        />\n                    ) : (\n                            <CriticalWarnings\n                                // style={{ width: \"80%\" }}\n                                onClick={initCriticals}\n                            // loadPtInfo={loadById}\n                            // warnings={ptInfo}\n                            />\n                        )}\n                </Col>\n                <Col>\n                    <Card style={{ marginBottom: \"1rem\" }}>\n                        <Card.Header>New Vitals</Card.Header>\n                        <Card.Body>\n                            {vitals.time ? (\n                                <VitalsForm onChange={handleVitalsInput} onSubmit={handleVitalsSubmit} />\n                            ) : (\n                                    <NewVitals onClick={initVitals} />\n                                )}\n                        </Card.Body>\n                    </Card>\n                </Col>\n                <Col>\n                    <Card>\n                        <Card.Header>Patient Information</Card.Header>\n                        <Card.Body>\n                            {patientInformation.pending ? (\n                                <PatientInformationForm onChange={handlePtInformationChange} onSubmit={handlePtInformationSubmit} />\n                            ) : (\n                                    <UpdateInformation onClick={initPatientInformation} />\n                                )}\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row> */}\n            <Row className=\"justify-content-center\">\n                <Col>\n                    {ptInfo.data ? (\n                        <PatientCard patient={ptInfo.data} />\n\n                    ) : (<h3>Error</h3>)\n                    }\n                </Col>\n            </Row>\n        </Container>\n    )\n}\n\nexport default CurrentPatient"]},"metadata":{},"sourceType":"module"}